
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://mydomain.com/mysite/ChemicalReaction/">
      
      
        <link rel="prev" href="../ChemicalFormula/">
      
      
        <link rel="next" href="../API/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.9">
    
    
      
        <title>ChemicalReaction - chemsynthcalc</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.4af4bdda.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#reaction-object-initialization" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="chemsynthcalc" class="md-header__button md-logo" aria-label="chemsynthcalc" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            chemsynthcalc
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              ChemicalReaction
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/Syrov-Egor/chemsynthcalc" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="chemsynthcalc" class="md-nav__button md-logo" aria-label="chemsynthcalc" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    chemsynthcalc
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Syrov-Egor/chemsynthcalc" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../usage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Usage
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../ChemicalFormula/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ChemicalFormula
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    ChemicalReaction
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    ChemicalReaction
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#reaction-object-initialization" class="md-nav__link">
    <span class="md-ellipsis">
      Reaction object initialization
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modes" class="md-nav__link">
    <span class="md-ellipsis">
      Modes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Modes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#force-mode" class="md-nav__link">
    <span class="md-ellipsis">
      Force mode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-mode" class="md-nav__link">
    <span class="md-ellipsis">
      Check mode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#balance-mode" class="md-nav__link">
    <span class="md-ellipsis">
      Balance mode
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#coefficients-property-calculation" class="md-nav__link">
    <span class="md-ellipsis">
      Coefficients property calculation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Coefficients property calculation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#inv-or-matrix-inverse-thorne-algorithm" class="md-nav__link">
    <span class="md-ellipsis">
      inv or matrix inverse Thorne algorithm
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gpinv-or-general-pseudoinverse-risteski-algorithm" class="md-nav__link">
    <span class="md-ellipsis">
      gpinv or general pseudoinverse Risteski algorithm
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ppinv-or-partial-pseudoinverse-risteski-algorithm" class="md-nav__link">
    <span class="md-ellipsis">
      ppinv or partial pseudoinverse Risteski algorithm
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#comb-or-combinatorial-algorithm" class="md-nav__link">
    <span class="md-ellipsis">
      comb or combinatorial algorithm
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#coefficients-property-setter" class="md-nav__link">
    <span class="md-ellipsis">
      Coefficients property setter
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#target" class="md-nav__link">
    <span class="md-ellipsis">
      Target
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#target-mass" class="md-nav__link">
    <span class="md-ellipsis">
      Target mass
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#chemicalreaction-properties" class="md-nav__link">
    <span class="md-ellipsis">
      ChemicalReaction properties
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#output" class="md-nav__link">
    <span class="md-ellipsis">
      Output
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../API/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API reference
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../contacts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contacts
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#reaction-object-initialization" class="md-nav__link">
    <span class="md-ellipsis">
      Reaction object initialization
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modes" class="md-nav__link">
    <span class="md-ellipsis">
      Modes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Modes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#force-mode" class="md-nav__link">
    <span class="md-ellipsis">
      Force mode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-mode" class="md-nav__link">
    <span class="md-ellipsis">
      Check mode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#balance-mode" class="md-nav__link">
    <span class="md-ellipsis">
      Balance mode
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#coefficients-property-calculation" class="md-nav__link">
    <span class="md-ellipsis">
      Coefficients property calculation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Coefficients property calculation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#inv-or-matrix-inverse-thorne-algorithm" class="md-nav__link">
    <span class="md-ellipsis">
      inv or matrix inverse Thorne algorithm
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gpinv-or-general-pseudoinverse-risteski-algorithm" class="md-nav__link">
    <span class="md-ellipsis">
      gpinv or general pseudoinverse Risteski algorithm
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ppinv-or-partial-pseudoinverse-risteski-algorithm" class="md-nav__link">
    <span class="md-ellipsis">
      ppinv or partial pseudoinverse Risteski algorithm
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#comb-or-combinatorial-algorithm" class="md-nav__link">
    <span class="md-ellipsis">
      comb or combinatorial algorithm
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#coefficients-property-setter" class="md-nav__link">
    <span class="md-ellipsis">
      Coefficients property setter
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#target" class="md-nav__link">
    <span class="md-ellipsis">
      Target
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#target-mass" class="md-nav__link">
    <span class="md-ellipsis">
      Target mass
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#chemicalreaction-properties" class="md-nav__link">
    <span class="md-ellipsis">
      ChemicalReaction properties
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#output" class="md-nav__link">
    <span class="md-ellipsis">
      Output
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


  <h1>ChemicalReaction</h1>

<p>A class to calculate end results of chemical reaction from the reaction string.</p>
<p>API docs: <a class="autorefs autorefs-internal" href="../API/#chemsynthcalc.chemical_reaction.ChemicalReaction">ChemicalReaction</a></p>
<h2 id="reaction-object-initialization">Reaction object initialization</h2>
<p>To create a reaction object from a string:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">chemsynthcalc</span><span class="w"> </span><span class="kn">import</span> <span class="n">ChemicalReaction</span>

<span class="n">reaction_string</span> <span class="o">=</span> <span class="s2">&quot;Fe2O3+C=Fe3O4+FeO+Fe+Fe3C+CO+CO2&quot;</span>
<span class="n">reaction</span> <span class="o">=</span> <span class="n">ChemicalReaction</span><span class="p">(</span><span class="n">reaction_string</span><span class="p">)</span>
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Important</p>
<p>The symbols allowed for the ChemicalReaction input string are:
a-z A-Z 0-9 . () [] {} * · • = &lt; - &gt; → ⇄ + whitespace</p>
</div>
<p>Whitespaces will be ignored. If there are any other symbols in the string, they will not be ignored, instead <a class="autorefs autorefs-internal" href="../API/#chemsynthcalc.chem_errors.InvalidCharacter">InvalidCharacter</a> error will be raised.</p>
<div class="admonition warning">
<p class="admonition-title">Important</p>
<p>Other important conditions for calculations are:</p>
<p>There must be one reactant-product separator (listed in <a class="autorefs autorefs-internal" title="Reaction" href="../API/#chemsynthcalc.reaction.Reaction">possible_reaction_separators</a>)</p>
<p>The sets of atoms in the reactant and product (left-right) parts of equation should be equal (in other words, all atoms in the left must appear on the right). If not, <a class="autorefs autorefs-internal" href="../API/#chemsynthcalc.chem_errors.ReactantProductDifference">ReactantProductDifference</a> error will be raised.</p>
</div>
<p>There are other important arguments for reaction object creation. The most important concept is calculation <em>mode</em>.</p>
<h2 id="modes">Modes</h2>
<h3 id="force-mode">Force mode</h3>
<div class="admonition danger">
<p class="admonition-title">Danger</p>
<p>This mode does not imply any automatic checking of calculation results. Use it at your own risk!</p>
</div>
<p>Force mode can be used when user enters coefficients in the reaction string and want masses to be calculated whether the reaction is balanced or not. For example, consider the following reaction for iodine synthesis:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">chemsynthcalc</span><span class="w"> </span><span class="kn">import</span> <span class="n">ChemicalReaction</span>

<span class="n">reaction_string</span> <span class="o">=</span> <span class="s2">&quot;KIO3+KI+H2SO4=I2+K2SO4+H2O&quot;</span>
</code></pre></div>
<p>If we know beforehand that coefficient list will be [1,5,3,3,3,3], we can input:</p>
<p><div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">chemsynthcalc</span><span class="w"> </span><span class="kn">import</span> <span class="n">ChemicalReaction</span>

<span class="n">reaction_string</span> <span class="o">=</span> <span class="s2">&quot;KIO3+5KI+3H2SO4=3I2+3K2SO4+3H2O&quot;</span>
<span class="n">reaction</span> <span class="o">=</span> <span class="n">ChemicalReaction</span><span class="p">(</span><span class="n">reaction_string</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;force&quot;</span><span class="p">)</span>
</code></pre></div>
We can make sure that the reaction is balanced:</p>
<p><div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">reaction</span><span class="o">.</span><span class="n">is_balanced</span>
<span class="kc">True</span>
</code></pre></div>
And calculate the respective masses from this reaction:</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">reaction</span><span class="o">.</span><span class="n">masses</span>
<span class="p">[</span><span class="mf">0.2810506</span><span class="p">,</span> <span class="mf">1.09007501</span><span class="p">,</span> <span class="mf">0.38640089</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.68654792</span><span class="p">,</span> <span class="mf">0.07097859</span><span class="p">]</span>
</code></pre></div>
<p>But what if we decided to add a 3-fold excess of KIO3? In the force mode, we <strong>can</strong> do that and still get output masses, even though the reaction is not balanced:</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span><span class="w"> </span><span class="nn">chemsynthcalc</span><span class="w"> </span><span class="kn">import</span> <span class="n">ChemicalReaction</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">reaction_string</span> <span class="o">=</span> <span class="s2">&quot;3KIO3+5KI+3H2SO4=3I2+3K2SO4+3H2O&quot;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">reaction</span> <span class="o">=</span> <span class="n">ChemicalReaction</span><span class="p">(</span><span class="n">reaction_string</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;force&quot;</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">reaction</span><span class="o">.</span><span class="n">is_balanced</span>
<span class="kc">False</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">reaction</span><span class="o">.</span><span class="n">masses</span>
<span class="p">[</span><span class="mf">0.84315182</span><span class="p">,</span> <span class="mf">1.09007501</span><span class="p">,</span> <span class="mf">0.38640089</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.68654792</span><span class="p">,</span> <span class="mf">0.07097859</span><span class="p">]</span>
</code></pre></div>
<p>As we can see, the mass of KIO3 has increased, while all other masses have not been changed.</p>
<h3 id="check-mode">Check mode</h3>
<p>Check mode is almost the same as force mode, but with mandatory reaction balance checks. Therefore, an unbalanced reaction cannot be calculated:</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span><span class="w"> </span><span class="nn">chemsynthcalc</span><span class="w"> </span><span class="kn">import</span> <span class="n">ChemicalReaction</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">reaction_string</span> <span class="o">=</span> <span class="s2">&quot;3KIO3+5KI+3H2SO4=3I2+3K2SO4+3H2O&quot;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">reaction</span> <span class="o">=</span> <span class="n">ChemicalReaction</span><span class="p">(</span><span class="n">reaction_string</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;check&quot;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">reaction</span><span class="o">.</span><span class="n">is_balanced</span>

<span class="n">chemsynthcalc</span><span class="o">.</span><span class="n">chem_errors</span><span class="o">.</span><span class="n">ReactionNotBalanced</span><span class="p">:</span> <span class="n">This</span> <span class="n">reaction</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">balanced</span><span class="err">!</span>
</code></pre></div>
<p>Whereas if we input the right list of coefficients:
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span><span class="w"> </span><span class="nn">chemsynthcalc</span><span class="w"> </span><span class="kn">import</span> <span class="n">ChemicalReaction</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">reaction_string</span> <span class="o">=</span> <span class="s2">&quot;3KIO3+5KI+3H2SO4=3I2+3K2SO4+3H2O&quot;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">reaction</span> <span class="o">=</span> <span class="n">ChemicalReaction</span><span class="p">(</span><span class="n">reaction_string</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;check&quot;</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">reaction</span><span class="o">.</span><span class="n">is_balanced</span>
<span class="kc">True</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">reaction</span><span class="o">.</span><span class="n">masses</span>
<span class="p">[</span><span class="mf">0.2810506</span><span class="p">,</span> <span class="mf">1.09007501</span><span class="p">,</span> <span class="mf">0.38640089</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.68654792</span><span class="p">,</span> <span class="mf">0.07097859</span><span class="p">]</span>
</code></pre></div></p>
<h3 id="balance-mode">Balance mode</h3>
<p>The last mode is designed for the automatic reaction balancing by means of <a class="autorefs autorefs-internal" href="../API/#chemsynthcalc.balancer.Balancer">Balancer</a> class. It is the <strong>default mode</strong>. For most reactions, the auto balancing option is enough:</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span><span class="w"> </span><span class="nn">chemsynthcalc</span><span class="w"> </span><span class="kn">import</span> <span class="n">ChemicalReaction</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">reaction_string</span> <span class="o">=</span> <span class="s2">&quot;KIO3+KI+H2SO4=I2+K2SO4+H2O&quot;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">reaction</span> <span class="o">=</span> <span class="n">ChemicalReaction</span><span class="p">(</span><span class="n">reaction_string</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;balance&quot;</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">reaction</span><span class="o">.</span><span class="n">coefficients</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">reaction</span><span class="o">.</span><span class="n">is_balanced</span>
<span class="kc">True</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">reaction</span><span class="o">.</span><span class="n">algorithm</span> <span class="c1"># we can also check which algorithm solved the reaction</span>
<span class="n">inverse</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">reaction</span><span class="o">.</span><span class="n">masses</span>
<span class="p">[</span><span class="mf">0.2810506</span><span class="p">,</span> <span class="mf">1.09007501</span><span class="p">,</span> <span class="mf">0.38640089</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.68654792</span><span class="p">,</span> <span class="mf">0.07097859</span><span class="p">]</span>
</code></pre></div>
<p>In some cases, however, the auto-balancing is not enough, or one would want to calculate coefficients strictly with a specific algorithm. To address these issues, the following is implemented in ChemicalReaction class logic:</p>
<h2 id="coefficients-property-calculation">Coefficients property calculation</h2>
<p>The <a class="autorefs autorefs-internal" href="../API/#chemsynthcalc.balancer.Balancer">Balancer</a> class is designed to give high-level interface to every coefficient calculation algorithm implemented in chemsynthcalc. These can be chosen by the specific method name, and they are:</p>
<h3 id="inv-or-matrix-inverse-thorne-algorithm">inv or matrix inverse Thorne algorithm</h3>
<p>See <a class="autorefs autorefs-internal" title="_inv_algorithm()" href="../API/#chemsynthcalc.balancing_algos.BalancingAlgorithms._inv_algorithm">inv_algorithm</a> for details.</p>
<h3 id="gpinv-or-general-pseudoinverse-risteski-algorithm">gpinv or general pseudoinverse Risteski algorithm</h3>
<p>See <a class="autorefs autorefs-internal" title="_gpinv_algorithm()" href="../API/#chemsynthcalc.balancing_algos.BalancingAlgorithms._gpinv_algorithm">gpinv_algorithm</a> for details.</p>
<h3 id="ppinv-or-partial-pseudoinverse-risteski-algorithm">ppinv or partial pseudoinverse Risteski algorithm</h3>
<p>See <a class="autorefs autorefs-internal" title="_ppinv_algorithm()" href="../API/#chemsynthcalc.balancing_algos.BalancingAlgorithms._ppinv_algorithm">ppinv_algorithm</a> for details.</p>
<h3 id="comb-or-combinatorial-algorithm">comb or combinatorial algorithm</h3>
<p>See <a class="autorefs autorefs-internal" title="_comb_algorithm(max_number_of_iterations=100000000.0)" href="../API/#chemsynthcalc.balancing_algos.BalancingAlgorithms._comb_algorithm">comb_algorithm</a> for details.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Although <a class="autorefs autorefs-internal" title="_intify_coefficients(coefficients, limit)" href="../API/#chemsynthcalc.balancer.Balancer._intify_coefficients">_intify_coefficients</a> tries to intify coefficients, it won't always succeed. In this case, coefficients will stay float without any exception raise.</p>
</div>
<p>Some examples of the same reaction balanced by these four different methods:</p>
<p><div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span><span class="w"> </span><span class="nn">chemsynthcalc</span><span class="w"> </span><span class="kn">import</span> <span class="n">ChemicalReaction</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">reaction_string</span> <span class="o">=</span> <span class="s2">&quot;Fe2O3+C=Fe3O4+FeO+Fe+Fe3C+CO+CO2&quot;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">reaction</span> <span class="o">=</span> <span class="n">ChemicalReaction</span><span class="p">(</span><span class="n">reaction_string</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;balance&quot;</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">reaction</span><span class="o">.</span><span class="n">coefficients</span> <span class="o">=</span> <span class="n">reaction</span><span class="o">.</span><span class="n">balancer</span><span class="o">.</span><span class="n">inv</span><span class="p">()</span>
<span class="s2">&quot;chemsynthcalc.chem_errors.BalancingError: Can&#39;t balance reaction by inv method&quot;</span>
</code></pre></div>
The inverse algorithm can't handle this! Let's try others, like general pseudoinverse:
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">reaction</span><span class="o">.</span><span class="n">coefficients</span> <span class="o">=</span> <span class="n">reaction</span><span class="o">.</span><span class="n">balancer</span><span class="o">.</span><span class="n">gpinv</span><span class="p">()</span>
<span class="p">[</span><span class="mi">1954</span><span class="p">,</span> <span class="mi">1854</span><span class="p">,</span> <span class="mi">518</span><span class="p">,</span> <span class="mi">1093</span><span class="p">,</span> <span class="mi">1096</span><span class="p">,</span> <span class="mi">55</span><span class="p">,</span> <span class="mi">901</span><span class="p">,</span> <span class="mi">898</span><span class="p">]</span>
</code></pre></div>
partial pseudoinverse:
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">reaction</span><span class="o">.</span><span class="n">coefficients</span> <span class="o">=</span> <span class="n">reaction</span><span class="o">.</span><span class="n">balancer</span><span class="o">.</span><span class="n">ppinv</span><span class="p">()</span>
<span class="p">[</span><span class="mi">39</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">18</span><span class="p">]</span>
</code></pre></div>
and comb:
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">reaction</span><span class="o">.</span><span class="n">coefficients</span> <span class="o">=</span> <span class="n">reaction</span><span class="o">.</span><span class="n">balancer</span><span class="o">.</span><span class="n">comb</span><span class="p">()</span>
<span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
</code></pre></div></p>
<p>As we can see, we have got <em>four</em> different results (including 3 right ones) using <em>four</em> different algorithms. This is why the :meth:.ChemicalReaction.balancer.x() methods were implemented in the first place. We can, of course, get gpinv or ppinv data without intification:
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span><span class="w"> </span><span class="nn">chemsynthcalc</span><span class="w"> </span><span class="kn">import</span> <span class="n">ChemicalReaction</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">reaction_string</span> <span class="o">=</span> <span class="s2">&quot;Fe2O3+C=Fe3O4+FeO+Fe+Fe3C+CO+CO2&quot;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">reaction</span> <span class="o">=</span> <span class="n">ChemicalReaction</span><span class="p">(</span><span class="n">reaction_string</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;balance&quot;</span><span class="p">,</span> <span class="n">intify</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">reaction</span><span class="o">.</span><span class="n">coefficients</span> <span class="o">=</span> <span class="n">reaction</span><span class="o">.</span><span class="n">balancer</span><span class="o">.</span><span class="n">gpinv</span><span class="p">()</span>
<span class="p">[</span><span class="mf">1.4169688179840456</span><span class="p">,</span> <span class="mf">1.3444525018129083</span><span class="p">,</span> <span class="mf">0.37563451776649776</span><span class="p">,</span> <span class="mf">0.7926033357505439</span><span class="p">,</span> <span class="mf">0.7947788252356772</span><span class="p">,</span> <span class="mf">0.03988397389412329</span><span class="p">,</span> <span class="mf">0.6533720087019586</span><span class="p">,</span> <span class="mf">0.6511965192168249</span><span class="p">]</span>
</code></pre></div></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Coefficients calculations by ChemicalReaction.balancer.x() methods works in all three modes (force, check and balance).</p>
</div>
<h2 id="coefficients-property-setter">Coefficients property setter</h2>
<p>Unlike other properties of ChemicalFormula and ChemicalReaction, which are programmed as read-only cached properties without setters, the <a class="autorefs autorefs-internal" title="coefficients

  
      cached
      property
  " href="../API/#chemsynthcalc.chemical_reaction.ChemicalReaction.coefficients">coefficients</a> property can be set directly with appropriate list of coefficients:</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span><span class="w"> </span><span class="nn">chemsynthcalc</span><span class="w"> </span><span class="kn">import</span> <span class="n">ChemicalReaction</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">reaction_string</span> <span class="o">=</span> <span class="s2">&quot;KIO3+KI+H2SO4=I2+K2SO4+H2O&quot;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">reaction</span> <span class="o">=</span> <span class="n">ChemicalReaction</span><span class="p">(</span><span class="n">reaction_string</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;check&quot;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">reaction</span><span class="o">.</span><span class="n">coefficients</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">reaction</span><span class="o">.</span><span class="n">coefficients</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">reaction</span><span class="o">.</span><span class="n">is_balanced</span>
<span class="kc">True</span>
</code></pre></div>
<p>The <a class="autorefs autorefs-internal" title="coefficients_validation(coefficients)" href="../API/#chemsynthcalc.coefs.Coefficients.coefficients_validation">coefficients_validation()</a> method checks setted coefficients <strong>after setting them</strong> in such properties as <a class="autorefs autorefs-internal" title="normalized_coefficients

  
      cached
      property
  " href="../API/#chemsynthcalc.chemical_reaction.ChemicalReaction.normalized_coefficients">normalized_coefficients</a> and <a class="autorefs autorefs-internal" title="masses

  
      cached
      property
  " href="../API/#chemsynthcalc.chemical_reaction.ChemicalReaction.masses">masses</a>, therefore does not allow methods to calculate values with bad coefficients, for example:</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span><span class="w"> </span><span class="nn">chemsynthcalc</span><span class="w"> </span><span class="kn">import</span> <span class="n">ChemicalReaction</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">reaction_string</span> <span class="o">=</span> <span class="s2">&quot;KIO3+KI+H2SO4=I2+K2SO4+H2O&quot;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">reaction</span> <span class="o">=</span> <span class="n">ChemicalReaction</span><span class="p">(</span><span class="n">reaction_string</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;check&quot;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">reaction</span><span class="o">.</span><span class="n">coefficients</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">reaction</span><span class="o">.</span><span class="n">coefficients</span>
<span class="p">[</span><span class="mi">1</span><span class="p">]</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">reaction</span><span class="o">.</span><span class="n">is_balanced</span>
<span class="kc">False</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">reaction</span><span class="o">.</span><span class="n">masses</span>
<span class="n">chemsynthcalc</span><span class="o">.</span><span class="n">chem_errors</span><span class="o">.</span><span class="n">BadCoeffiecients</span><span class="p">:</span> <span class="n">Number</span> <span class="n">of</span> <span class="n">coefficients</span> <span class="n">should</span> <span class="n">be</span> <span class="n">equal</span> <span class="n">to</span> <span class="mi">6</span>
</code></pre></div>
<p>This is one more way (along with direct input of coefficients in the reaction string for force and check modes) to input a custom set of coefficients for a particular reaction.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Coefficients setting works in all three modes (force, check and balance).</p>
</div>
<p>Now, when we covered <em>modes</em> and coefficients property calculations, we can get back to other arguments for reaction object creation.</p>
<h2 id="target">Target</h2>
<p>The "target" parameter is the target chemical synthesis substance (i.e., whose mass is known in advance). The target choice is implemented as an integer pointer to formula index in products (right side of equation). There are, of course, other ways to do this (like explicitly input target as formula string), but integer index target was chose as method less prone to errors. Most of the time the target of the synthesis is the first product anyway (which is equal to 0 by default). We can set a target with object instantiation (the target is 1 which is FeO):</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span><span class="w"> </span><span class="nn">chemsynthcalc</span><span class="w"> </span><span class="kn">import</span> <span class="n">ChemicalReaction</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">reaction_string</span> <span class="o">=</span> <span class="s2">&quot;Fe2O3+C=Fe3O4+FeO+Fe+Fe3C+CO+CO2&quot;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">reaction</span> <span class="o">=</span> <span class="n">ChemicalReaction</span><span class="p">(</span><span class="n">reaction_string</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;balance&quot;</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">reaction</span><span class="o">.</span><span class="n">masses</span>
<span class="p">[</span><span class="mf">3.97359366</span><span class="p">,</span> <span class="mf">0.28358172</span><span class="p">,</span> <span class="mf">1.52731369</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.77944268</span><span class="p">,</span> <span class="mf">0.12575572</span><span class="p">,</span> <span class="mf">0.32138621</span><span class="p">,</span> <span class="mf">0.5032771</span><span class="p">]</span>
</code></pre></div>
<p>If we change the target, masses will obviously change too:</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">reaction</span> <span class="o">=</span> <span class="n">ChemicalReaction</span><span class="p">(</span><span class="n">reaction_string</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;balance&quot;</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">reaction</span><span class="o">.</span><span class="n">masses</span>
<span class="p">[</span><span class="mf">5.09799345</span><span class="p">,</span> <span class="mf">0.36382626</span><span class="p">,</span> <span class="mf">1.95949455</span><span class="p">,</span> <span class="mf">1.28296797</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.16134056</span><span class="p">,</span> <span class="mf">0.41232821</span><span class="p">,</span> <span class="mf">0.64568841</span><span class="p">]</span>
</code></pre></div>
<p>The target can also be negative (limiting compoud - C in that case):</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">reaction</span> <span class="o">=</span> <span class="n">ChemicalReaction</span><span class="p">(</span><span class="n">reaction_string</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;balance&quot;</span><span class="p">,</span> <span class="n">target</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">reaction</span><span class="o">.</span><span class="n">masses</span>
<span class="p">[</span><span class="mf">14.01216438</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">5.38579736</span><span class="p">,</span> <span class="mf">3.52632041</span><span class="p">,</span> <span class="mf">2.74856462</span><span class="p">,</span> <span class="mf">0.443455</span><span class="p">,</span> <span class="mf">1.13331074</span><span class="p">,</span> <span class="mf">1.77471629</span><span class="p">]</span>
</code></pre></div>
<h2 id="target-mass">Target mass</h2>
<p>The mass of target compound, the only mass that we know in advance before synthesis (in grams). We can change the target mass during the ChemicalReaction object instantiation (1 gram is the default):</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span><span class="w"> </span><span class="nn">chemsynthcalc</span><span class="w"> </span><span class="kn">import</span> <span class="n">ChemicalReaction</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">reaction_string</span> <span class="o">=</span> <span class="s2">&quot;Fe2O3+C=Fe3O4+FeO+Fe+Fe3C+CO+CO2&quot;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">reaction</span> <span class="o">=</span> <span class="n">ChemicalReaction</span><span class="p">(</span><span class="n">reaction_string</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;balance&quot;</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">target_mass</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">reaction</span><span class="o">.</span><span class="n">masses</span>
<span class="p">[</span><span class="mf">7.94718732</span><span class="p">,</span> <span class="mf">0.56716344</span><span class="p">,</span> <span class="mf">3.05462737</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">1.55888536</span><span class="p">,</span> <span class="mf">0.25151145</span><span class="p">,</span> <span class="mf">0.64277241</span><span class="p">,</span> <span class="mf">1.0065542</span><span class="p">]</span>
</code></pre></div>
<h2 id="chemicalreaction-properties">ChemicalReaction properties</h2>
<p>After the object initialization, we can access the ChemicalReaction properties:</p>
<ul>
<li><a class="autorefs autorefs-internal" title="reaction

  
      cached
      property
  " href="../API/#chemsynthcalc.chemical_reaction.ChemicalReaction.reaction">reaction</a></li>
<li><a class="autorefs autorefs-internal" title="decomposed_reaction

  
      cached
      property
  " href="../API/#chemsynthcalc.chemical_reaction.ChemicalReaction.decomposed_reaction">decomposed_reaction</a></li>
<li><a class="autorefs autorefs-internal" title="_calculated_target

  
      cached
      property
  " href="../API/#chemsynthcalc.chemical_reaction.ChemicalReaction._calculated_target">_calculated_target</a></li>
<li><a class="autorefs autorefs-internal" title="chemformula_objs

  
      cached
      property
  " href="../API/#chemsynthcalc.chemical_reaction.ChemicalReaction.chemformula_objs">chemformula_objs</a></li>
<li><a class="autorefs autorefs-internal" title="parsed_formulas

  
      cached
      property
  " href="../API/#chemsynthcalc.chemical_reaction.ChemicalReaction.parsed_formulas">parsed_formulas</a></li>
<li><a class="autorefs autorefs-internal" title="matrix

  
      cached
      property
  " href="../API/#chemsynthcalc.chemical_reaction.ChemicalReaction.matrix">matrix</a></li>
<li><a class="autorefs autorefs-internal" title="balancer

  
      cached
      property
  " href="../API/#chemsynthcalc.chemical_reaction.ChemicalReaction.balancer">balancer</a></li>
<li><a class="autorefs autorefs-internal" title="molar_masses

  
      cached
      property
  " href="../API/#chemsynthcalc.chemical_reaction.ChemicalReaction.molar_masses">molar_masses</a></li>
<li><a class="autorefs autorefs-internal" title="coefficients

  
      cached
      property
  " href="../API/#chemsynthcalc.chemical_reaction.ChemicalReaction.coefficients">coefficients</a></li>
<li><a class="autorefs autorefs-internal" title="normalized_coefficients

  
      cached
      property
  " href="../API/#chemsynthcalc.chemical_reaction.ChemicalReaction.normalized_coefficients">normalized_coefficients</a></li>
<li><a class="autorefs autorefs-internal" title="is_balanced

  
      property
  " href="../API/#chemsynthcalc.chemical_reaction.ChemicalReaction.is_balanced">is_balanced</a></li>
<li><a class="autorefs autorefs-internal" title="final_reaction

  
      cached
      property
  " href="../API/#chemsynthcalc.chemical_reaction.ChemicalReaction.final_reaction">final_reaction</a></li>
<li><a class="autorefs autorefs-internal" title="final_reaction_normalized

  
      cached
      property
  " href="../API/#chemsynthcalc.chemical_reaction.ChemicalReaction.final_reaction_normalized">final_reaction_normalized</a></li>
<li><a class="autorefs autorefs-internal" title="masses

  
      cached
      property
  " href="../API/#chemsynthcalc.chemical_reaction.ChemicalReaction.masses">masses</a></li>
<li><a class="autorefs autorefs-internal" title="output_results

  
      cached
      property
  " href="../API/#chemsynthcalc.chemical_reaction.ChemicalReaction.output_results">output_results</a></li>
</ul>
<h2 id="output">Output</h2>
<p>A typical ChemicalReaction results output will look like this:</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span><span class="w"> </span><span class="nn">chemsynthcalc</span><span class="w"> </span><span class="kn">import</span> <span class="n">ChemicalReaction</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">reaction_string</span> <span class="o">=</span> <span class="s2">&quot;KIO3+KI+H2SO4=I2+K2SO4+H2O&quot;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">reaction</span> <span class="o">=</span> <span class="n">ChemicalReaction</span><span class="p">(</span><span class="n">reaction_string</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">reaction</span><span class="o">.</span><span class="n">print_results</span><span class="p">()</span>

<span class="n">initial</span> <span class="n">reaction</span><span class="p">:</span> <span class="n">KIO3</span><span class="o">+</span><span class="n">KI</span><span class="o">+</span><span class="n">H2SO4</span><span class="o">=</span><span class="n">I2</span><span class="o">+</span><span class="n">K2SO4</span><span class="o">+</span><span class="n">H2O</span>
<span class="n">reaction</span> <span class="n">matrix</span><span class="p">:</span>
 <span class="p">[[</span><span class="mf">1.</span> <span class="mf">1.</span> <span class="mf">0.</span> <span class="mf">0.</span> <span class="mf">2.</span> <span class="mf">0.</span><span class="p">]</span>
 <span class="p">[</span><span class="mf">1.</span> <span class="mf">1.</span> <span class="mf">0.</span> <span class="mf">2.</span> <span class="mf">0.</span> <span class="mf">0.</span><span class="p">]</span>
 <span class="p">[</span><span class="mf">3.</span> <span class="mf">0.</span> <span class="mf">4.</span> <span class="mf">0.</span> <span class="mf">4.</span> <span class="mf">1.</span><span class="p">]</span>
 <span class="p">[</span><span class="mf">0.</span> <span class="mf">0.</span> <span class="mf">2.</span> <span class="mf">0.</span> <span class="mf">0.</span> <span class="mf">2.</span><span class="p">]</span>
 <span class="p">[</span><span class="mf">0.</span> <span class="mf">0.</span> <span class="mf">1.</span> <span class="mf">0.</span> <span class="mf">1.</span> <span class="mf">0.</span><span class="p">]]</span>
<span class="n">mode</span><span class="p">:</span> <span class="n">balance</span>
<span class="n">formulas</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;KIO3&#39;</span><span class="p">,</span> <span class="s1">&#39;KI&#39;</span><span class="p">,</span> <span class="s1">&#39;H2SO4&#39;</span><span class="p">,</span> <span class="s1">&#39;I2&#39;</span><span class="p">,</span> <span class="s1">&#39;K2SO4&#39;</span><span class="p">,</span> <span class="s1">&#39;H2O&#39;</span><span class="p">]</span>
<span class="n">coefficients</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">normalized</span> <span class="n">coefficients</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.33333333</span><span class="p">,</span> <span class="mf">1.66666667</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="n">algorithm</span><span class="p">:</span> <span class="n">inverse</span>
<span class="ow">is</span> <span class="n">balanced</span><span class="p">:</span> <span class="kc">True</span>
<span class="n">final</span> <span class="n">reaction</span><span class="p">:</span> <span class="n">KIO3</span><span class="o">+</span><span class="mi">5</span><span class="n">KI</span><span class="o">+</span><span class="mi">3</span><span class="n">H2SO4</span><span class="o">=</span><span class="mi">3</span><span class="n">I2</span><span class="o">+</span><span class="mi">3</span><span class="n">K2SO4</span><span class="o">+</span><span class="mi">3</span><span class="n">H2O</span>
<span class="n">final</span> <span class="n">reaction</span> <span class="n">normalized</span><span class="p">:</span> <span class="mf">0.33333333</span><span class="n">KIO3</span><span class="o">+</span><span class="mf">1.66666667</span><span class="n">KI</span><span class="o">+</span><span class="n">H2SO4</span><span class="o">=</span><span class="n">I2</span><span class="o">+</span><span class="n">K2SO4</span><span class="o">+</span><span class="n">H2O</span>
<span class="n">molar</span> <span class="n">masses</span><span class="p">:</span> <span class="p">[</span><span class="mf">213.99947</span><span class="p">,</span> <span class="mf">166.00247</span><span class="p">,</span> <span class="mf">98.072</span><span class="p">,</span> <span class="mf">253.80894</span><span class="p">,</span> <span class="mf">174.252</span><span class="p">,</span> <span class="mf">18.015</span><span class="p">]</span>
<span class="n">target</span><span class="p">:</span> <span class="n">I2</span>
<span class="n">masses</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.2811</span><span class="p">,</span> <span class="mf">1.0901</span><span class="p">,</span> <span class="mf">0.3864</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.6865</span><span class="p">,</span> <span class="mf">0.071</span><span class="p">]</span>
<span class="n">KIO3</span><span class="p">:</span> <span class="n">M</span> <span class="o">=</span> <span class="mf">213.9995</span> <span class="n">g</span><span class="o">/</span><span class="n">mol</span><span class="p">,</span> <span class="n">m</span> <span class="o">=</span> <span class="mf">0.2811</span> <span class="n">g</span>
<span class="n">KI</span><span class="p">:</span> <span class="n">M</span> <span class="o">=</span> <span class="mf">166.0025</span> <span class="n">g</span><span class="o">/</span><span class="n">mol</span><span class="p">,</span> <span class="n">m</span> <span class="o">=</span> <span class="mf">1.0901</span> <span class="n">g</span>
<span class="n">H2SO4</span><span class="p">:</span> <span class="n">M</span> <span class="o">=</span> <span class="mf">98.0720</span> <span class="n">g</span><span class="o">/</span><span class="n">mol</span><span class="p">,</span> <span class="n">m</span> <span class="o">=</span> <span class="mf">0.3864</span> <span class="n">g</span>
<span class="n">I2</span><span class="p">:</span> <span class="n">M</span> <span class="o">=</span> <span class="mf">253.8089</span> <span class="n">g</span><span class="o">/</span><span class="n">mol</span><span class="p">,</span> <span class="n">m</span> <span class="o">=</span> <span class="mf">1.0000</span> <span class="n">g</span>
<span class="n">K2SO4</span><span class="p">:</span> <span class="n">M</span> <span class="o">=</span> <span class="mf">174.2520</span> <span class="n">g</span><span class="o">/</span><span class="n">mol</span><span class="p">,</span> <span class="n">m</span> <span class="o">=</span> <span class="mf">0.6865</span> <span class="n">g</span>
<span class="n">H2O</span><span class="p">:</span> <span class="n">M</span> <span class="o">=</span> <span class="mf">18.0150</span> <span class="n">g</span><span class="o">/</span><span class="n">mol</span><span class="p">,</span> <span class="n">m</span> <span class="o">=</span> <span class="mf">0.0710</span> <span class="n">g</span>
</code></pre></div>
<p>One can output ChemicalReaction results using one of the 4 methods:</p>
<ul>
<li><a class="autorefs autorefs-internal" title="print_results(print_precision=4)" href="../API/#chemsynthcalc.chemical_reaction.ChemicalReaction.print_results">print_results</a>: print to stdout</li>
<li><a class="autorefs autorefs-internal" title="to_txt(filename='default', print_precision=4)" href="../API/#chemsynthcalc.chemical_reaction.ChemicalReaction.to_txt">to_txt</a>: save as plain txt file</li>
<li><a class="autorefs autorefs-internal" title="to_json(print_precision=4)" href="../API/#chemsynthcalc.chemical_reaction.ChemicalReaction.to_json">to_json</a>: serialization of output into an JSON object</li>
<li><a class="autorefs autorefs-internal" title="to_json_file(filename='default', print_precision=4)" href="../API/#chemsynthcalc.chemical_reaction.ChemicalReaction.to_json_file">to_json_file</a>: save as JSON file</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>